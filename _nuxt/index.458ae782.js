import{_ as $}from"./nuxt-link.5649a977.js";import{a as L,_ as q}from"./Card.925934ec.js";import{f as B,l as F,r as V,k as z,c as i,g as t,d as f,b as h,w as A,F as D,m as G,a as m,n as k,t as w,o as l,_ as P}from"./entry.8093d8b3.js";async function S(d,e){const{data:s,error:u,pending:a}=await L("profiles",()=>$fetch("https://reqres.in/api/users",{params:{page:e.value}}),{watch:[e],transform:n=>{console.log(n);const r=n.total_pages;return{profiles:n.data,pages:r}}});return u&&console.log(u.value),{res:s,page:e,next:()=>{var n,r,p;((n=s.value)!=null&&n.pages&&e.value+1<((r=s==null?void 0:s.value)==null?void 0:r.pages)||e.value+1==((p=s.value)==null?void 0:p.pages))&&(e.value++,d.push({path:"/profiles",query:{page:e.value}}))},previous:()=>{e.value--,d.push({path:"/profiles",query:{page:e.value}})},error:u,pending:a}}const E={class:"profiles wrapper"},I={key:0},R={key:1},T={key:2,class:"profiles__list"},j={class:"button-wrapper"},H=B({__name:"index",async setup(d){let e,s;const u=F();let a=V(0);a.value||(a.value=1);const{res:_,error:v,pending:n,previous:r,next:p}=([e,s]=z(()=>S(u,a)),e=await e,s(),e);return(J,c)=>{var x,b,y,g;const C=$,N=q;return l(),i("div",E,[t(n)?(l(),i("p",I,"Fetching profiles...")):t(v)?(l(),i("p",R,[f(" Sorry we are unable to get profiles "),h(C,{to:"/prfiles"},{default:A(()=>[f(" Go back")]),_:1})])):(l(),i("ul",T,[(l(!0),i(D,null,G((x=t(_))==null?void 0:x.profiles,o=>(l(),i("li",{key:o.id,class:"profiles__item"},[h(N,{isLink:!0,first_name:o.first_name,last_name:o.last_name,id:o.id,email:o.email,avatar:o.avatar},null,8,["first_name","last_name","id","email","avatar"])]))),128))])),m("div",j,[m("button",{class:k(`${t(a)>1?" button--active":"button--disabled"}  button button--prev`),onClick:c[0]||(c[0]=o=>t(r)())}," Previous ",2),f(" "+w(t(a))+" / "+w((b=t(_))==null?void 0:b.pages)+" ",1),m("button",{class:k(`${(y=t(_))!=null&&y.pages&&t(a)<((g=t(_))==null?void 0:g.pages)?" button--active":"button--disabled"}  button button--next`),onClick:c[1]||(c[1]=o=>t(p)())}," Next ",2)])])}}});const Q=P(H,[["__scopeId","data-v-9a2ede7f"]]);export{Q as default};
