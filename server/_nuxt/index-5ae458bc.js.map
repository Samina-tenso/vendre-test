{"version":3,"file":"index-5ae458bc.js","sources":["../../../../composables/useGetProfiles.ts","../../../../pages/profiles/index.vue"],"sourcesContent":["export default async function useGetProfiles(\n  router: any,\n  page: Ref<number>\n): Promise<GetProfiles> {\n  const {\n    data: res,\n    error,\n    pending,\n  } = await useLazyAsyncData(\n    \"profiles\",\n    (): Promise<Page> =>\n      $fetch(\"https://reqres.in/api/users\", {\n        params: { page: page.value },\n      }),\n    {\n      watch: [page],\n      transform: (res: Page) => {\n        console.log(res);\n        const pages = res.total_pages;\n        const profiles = res.data;\n        return { profiles, pages };\n      },\n    }\n  );\n  if (error) {\n    console.log(error.value);\n  }\n\n  const previous = () => {\n    page.value--;\n    router.push({ path: \"/profiles\", query: { page: page.value } });\n  };\n\n  const next = () => {\n    if (\n      (res.value?.pages && page.value + 1 < res?.value?.pages) ||\n      page.value + 1 == res.value?.pages\n    ) {\n      page.value++;\n      router.push({ path: \"/profiles\", query: { page: page.value } });\n    }\n  };\n  return { res, page, next, previous, error, pending };\n}\n","<template>\n  <div class=\"profiles wrapper\">\n    <p v-if=\"pending\">Fetching profiles...</p>\n    <p v-else-if=\"error\">\n      Sorry we are unable to get profiles\n      <NuxtLink to=\"/prfiles\"> Go back</NuxtLink>\n    </p>\n    <ul v-else=\"res?.profiles\" class=\"profiles__list\">\n      <li\n        :key=\"profile.id\"\n        v-for=\"profile of res?.profiles\"\n        class=\"profiles__item\"\n      >\n        <Card\n          :first_name=\"profile.first_name\"\n          :last_name=\"profile.last_name\"\n          :id=\"profile.id\"\n          :email=\"profile.email\"\n          :avatar=\"profile.avatar\"\n        />\n      </li>\n    </ul>\n    <div class=\"button-wrapper\">\n      <button class=\"button button--prev\" @click=\"previous()\" v-if=\"page > 1\">\n        Previous\n      </button>\n      {{ page }} / {{ res?.pages }}\n      <button\n        class=\"button button--next\"\n        @click=\"next()\"\n        v-if=\"res?.pages && page < res?.pages\"\n      >\n        Next\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport useGetProfiles from \"../../composables/index\";\nconst router = useRouter();\n\nlet page = ref(0);\nif (!page.value) {\n  page.value = 1;\n}\nconst { res, error, pending, previous, next } = await useGetProfiles(\n  router,\n  page\n);\n</script>\n\n<style lang=\"scss\" scoped>\n.profiles {\n  &__list {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n  &__item {\n    list-style: none;\n    &:not(last-child) {\n      padding-right: 1rem;\n    }\n  }\n\n  .button-wrapper {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: 1rem;\n  }\n  .button {\n    display: flex;\n    justify-content: center;\n    width: 4rem;\n    padding: 1rem 3rem 1rem 3rem;\n    background-color: white;\n    border: none;\n    filter: drop-shadow(0px 4px 8px rgba(0, 0, 0, 0.1));\n    font-weight: 300;\n    &:hover {\n      filter: drop-shadow(0px 4px 2px rgba(0, 0, 0, 0.1));\n    }\n    &--prev {\n      border-radius: 2.5rem;\n    }\n    &--next {\n      border-radius: 0 2.5rem 2.5rem 0;\n    }\n  }\n}\n</style>\n"],"names":["res","_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAA8B,eAAA,eAC5B,QACA,MACsB;AAChB,QAAA;AAAA,IACJ,MAAM;AAAA,IACN;AAAA,IACA;AAAA,MACE,MAAM;AAAA,IACR;AAAA,IACA,MACE,OAAO,+BAA+B;AAAA,MACpC,QAAQ,EAAE,MAAM,KAAK,MAAM;AAAA,IAAA,CAC5B;AAAA,IACH;AAAA,MACE,OAAO,CAAC,IAAI;AAAA,MACZ,WAAW,CAACA,SAAc;AACxB,gBAAQ,IAAIA,IAAG;AACf,cAAM,QAAQA,KAAI;AAClB,cAAM,WAAWA,KAAI;AACd,eAAA,EAAE,UAAU;MACrB;AAAA,IACF;AAAA,EAAA;AAEF,MAAI,OAAO;AACD,YAAA,IAAI,MAAM,KAAK;AAAA,EACzB;AAEA,QAAM,WAAW,MAAM;AAChB,SAAA;AACE,WAAA,KAAK,EAAE,MAAM,aAAa,OAAO,EAAE,MAAM,KAAK,MAAM,EAAA,CAAG;AAAA,EAAA;AAGhE,QAAM,OAAO,MAAM;;AACjB,UACG,SAAI,UAAJ,mBAAW,UAAS,KAAK,QAAQ,MAAI,gCAAK,UAAL,mBAAY,UAClD,KAAK,QAAQ,OAAK,SAAI,UAAJ,mBAAW,QAC7B;AACK,WAAA;AACE,aAAA,KAAK,EAAE,MAAM,aAAa,OAAO,EAAE,MAAM,KAAK,MAAM,EAAA,CAAG;AAAA,IAChE;AAAA,EAAA;AAEF,SAAO,EAAE,KAAK,MAAM,MAAM,UAAU,OAAO;AAC7C;;;;;;ACHA,UAAM,SAAS;AAEX,QAAA,OAAO,IAAI,CAAC;AACZ,QAAA,CAAC,KAAK,OAAO;AACf,WAAK,QAAQ;AAAA,IACf;AACA,UAAM,EAAE,KAAK,OAAO,SAAS,UAAU,UAAe,CAAA,QAAA,SAAA,IAAAC,iBAAA,MAAA;AAAA,MACpD;AAAA,MACA;AAAA,IAAA,CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}